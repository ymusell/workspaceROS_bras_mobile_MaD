<!doctype html>
<html lang="fr+en">
  <head>
    <title>Chaire-robots-turtlebot</title>
    <link rel="icon" type="image/png" sizes="16x16" href="pictures/logoOnglet_transparent.png">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="css/styleTurtlebot.css"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body class="bg" style="background-color:#ffffff">
    
    <!-- Bandeau -->
    <header>
        <div id='bandeau'>
            <nav class="navbar navbar-expand-md navbar-light" style="background-color:#62cdff">    <!-- "navbar navbar-dark" -->
                <a class="navbar-brand" href="index.html">
                    <img src="pictures/logo_MaD_light.png" width="80" height="50" class="d-inline-block" alt="logo de la chaire">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Accueil <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item active dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Robots
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item active" href="turtlebot_teleop.html">Turtlebot3</a>
                                <a class="dropdown-item" href="niryo_one.html">Niryo One</a>
                                <a class="dropdown-item" href="meuble.html">meuble</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle dropup" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Scénarios
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="scenario.html">Scénario n°1</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex">
                    <li class="nav-item dropdown">
                        <a class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="bd-versions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Paramètres <?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px" height="20px" viewBox="0 0 20 20" fill="#000" version="1.1"><g id="surface1"><path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 10 12.5 C 8.625 12.5 7.5 11.375 7.5 10 C 7.5 8.625 8.625 7.5 10 7.5 C 11.375 7.5 12.5 8.625 12.5 10 C 12.5 11.375 11.375 12.5 10 12.5 Z M 15.625 8.4375 C 15.5 7.980469 15.3125 7.542969 15.082031 7.144531 L 15.605469 5.582031 L 14.417969 4.394531 L 12.855469 4.917969 C 12.4375 4.6875 12 4.5 11.542969 4.375 L 10.832031 2.917969 L 9.167969 2.917969 L 8.4375 4.375 C 7.980469 4.5 7.542969 4.6875 7.144531 4.917969 L 5.582031 4.394531 L 4.394531 5.582031 L 4.917969 7.144531 C 4.6875 7.5625 4.5 8 4.375 8.457031 L 2.917969 9.167969 L 2.917969 10.832031 L 4.375 11.5625 C 4.5 12.019531 4.6875 12.457031 4.917969 12.855469 L 4.394531 14.417969 L 5.582031 15.605469 L 7.144531 15.082031 C 7.5625 15.3125 8 15.5 8.457031 15.625 L 9.1875 17.082031 L 10.855469 17.082031 L 11.582031 15.625 C 12.042969 15.5 12.480469 15.3125 12.875 15.082031 L 14.4375 15.605469 L 15.625 14.417969 L 15.105469 12.855469 C 15.332031 12.4375 15.519531 12 15.644531 11.542969 L 17.105469 10.8125 L 17.105469 9.144531 Z M 15.625 8.4375 "/></g></svg>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-versions">
                            <a class="dropdown-item" href="#">Mode nuit?
                            </a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container .pt-3">
        <h4 style="color: black;font-weight: bold;">TurtleBot3 Waffle Pi <span id="turtlebotName"></span>:</h4> <!--text-align:center;-->
    </div> 

    <!-- Informations générales -->

    <div class="row my-2" id="info_gene" style="margin-right: 0px;">
        <div class="col-md-4" style="margin-left: 6%;">
            <h6 style="color: black;">Informations générales :</h6>
            <div class="container" style="background-color: #CFE6FF;">
                <div class="row my-2">
                    <div class="col-md-5">
                        <p style="color: black;width: 420px;margin-bottom: 0%;">Statut : <span style="background-color: red;text-align: center;color: white; padding: 1px 5px;" id="statut_turtlebot"> non connecté</span></p>
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-md-6">
                        <p style="color: black">Batterie level : <span id="batterie_turtlebot"> 50 %</span></p>
                    </div>
                    <div class="col-md-6" style="padding-top: 8px;">     <!-- style="display: grid;align-items: center;" -->
                        <div class="progress">
                            <div id="battery_status" class="progress-bar progress-bar-striped progress-bar-animated"
                            role="progressbar" style="width:50%; background-color:#62cdff" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            50%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Actions -->
    <h6 style="color: black; margin-left: 6%;">Actions :</h6>

    <div class="container" id="actions" style="background-color: #CFE6FF;margin-left: 6%;">
        <div class="row my-2">
            <div class="col-md-3">
                <p>Positions pré-enregistrés</p>
            </div>
            <div class="col-md-9" style="background-color: white;"></div>
        </div>
        <div class="row my-2">
            <div class="col-md-3">
                <p>Lieux où se trouve le robot:</p>
            </div>
            <div class="col-md-2">
                <p style="text-align: center;background-color: #037DFF; border-radius: 5px;color: white;">Random</p>
            </div>
        </div>
        <div class="row my-2">
            <div class="col-md-3">
                <p>Déplacer le robot vers:</p>
            </div>
            <div class="col-md-3">
                <label class="containerRadio">La chambre
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="col-md-3">
                <label class="containerRadio">La cuisine (plan de travail)
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="col-md-3">
                <label class="containerRadio">La cuisine (frigidaire)
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
        </div>
        <div class="row my-2">
            <div class="col-md-3"></div>
            <div class="col-md-3">
                <label class="containerRadio">Le salon
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="col-md-3">
                <label class="containerRadio">La cuisine (table)
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="col-md-3">
                <label class="containerRadio">La base
                    <input type="radio" name="position" checked="unchecked">
                    <span class="checkmark"></span>
                </label>
            </div>
        </div>
        <div class="row my-2">
            <div class="col-0 col-md-6"></div>
            <div class="col-6 col-md-4">
                <button id="bouton_navigation" type="button" class="btn btn-info" onclick="gestionNavigation()">
                    <img src="pictures/play-circle.svg" alt="défilement vers le bas" width="18px" height="18px"/>
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-circle" viewBox="0 0 20 20">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/>
                    </svg> -->
                    <span>Lancer la navigation</span>
                </button>
            </div>
            <div class="col-4 col-md-2">
                <p id="etat_commande_position" style="background-color: gray; color: white; border-radius: 5px; text-align: center;margin-top: 10px;" >En attente</p>
            </div>
        </div>
    </div>

    <!-- controle manuel -->
    <button id="boutonControleManuel" class="btn" type="button" data-toggle="collapse" onclick="gestionControleManuel()" data-target="#main_controle" aria-expanded="false" aria-controls="main_controle" style="margin-left: 6%;padding-bottom: 1px;padding-top: 1px;">
        Contrôles Manuels <img src="pictures/flecheBas.svg" alt="défilement vers le bas" width="20px" height="20px"/>
    </button>
    <div class="collapse container" id="main_controle" style="background-color: #CFE6FF;margin-left: 6%;">
        <div class="row my-2" style="margin-bottom: 5px;">
            <div class="col-sm-7">
                <p style="margin-bottom: 0px;">Caméra : <span id="camera_status" style="background-color: red;text-align: center;color: white; padding: 1px 5px;">Désactivé</span>
                    <label class="switch" style="margin-top: 2px;vertical-align: middle;">
                        <input type="checkbox" id="camera_button"/>
                        <span class="slider round"></span>
                    </label>
                </p>
            </div>
            <!-- <div class="col-sm-2">
                <label class="switch" style="margin-top: 2px;">
                    <input type="checkbox"/>
                    <span class="slider round"></span>
                </label>
            </div> -->
        </div>
        <div class="row">
            <div class="d-none d-lg-flex col-md-12">     
                <div class="tab">
                    <button class="tablinks active" onclick="openControle(event, 'controle_clavier')">Clavier</button>
                    <button class="tablinks" onclick="openControle(event, 'controle_joystick')">Joystick</button>
                </div>
                
                <div id="controle_clavier" class="tabcontent" style="background-color: #8EC4FF;">
                    <div class="col-md-5" style="padding-left: 1px;background-color: #F6F8E1;margin: 5px;" onclick="modeChange('clavier')">
                        <h4 class="alert-heading">Instructions: </h4>
                        <p style="margin-bottom: 1px;">Pour diriger le robot, vous pouvez: </p>
                        <ul style="padding-left: 25px;margin-bottom: 10px;">
                            <li>Utiliser les touches du clavier </li>
                            <ul style="padding-left: 15px;margin-bottom: 10px;">
                                <li>touche <strong id='letterZ'>z</strong> pour avancer</li>
                                <li>touche <strong id='letterQ'>q</strong> pour tourner à gaucher</li>
                                <li>touche <strong id='letterD'>d</strong> pour tourner à droite</li>
                                <li>touche <strong id='letterX'>x</strong> pour reculer</li>
                                <li>touche <strong id='letterS'>s</strong> pour s'arrêter</li>
                            </ul>
                            <li>Utiliser les flèches ci-dessous: </li>
                        </ul>
                        <div class="row my-1" style="height: 25px;">
                            <div class="col-md-0"></div>
                            <div class="col-md-0" style="margin:auto;display:block">
                                <p style="font-size: 15px;">Avancer</p>
                            </div>
                            <div class="col-md-0"></div>
                        </div>
                        <div class="row my-1">
                            <div class="col-md"></div>
                            <div class="col-md-2" style="margin:auto;display:block;padding-left: 0px;">
                                <img src="https://raw.githubusercontent.com/Anton1B/Base_mobile_MaD/main/src_web/pictures/up.png" width="50" height="50" class="d-inline-block" alt="" onmousedown="Up()" onmouseup="UpRelease()" id="up-img" type="button">
                            </div>
                            <div class="col-md"></div>
                        </div>
                
                        <div class="row my-2">
                            <div class="col-md" style="padding-right: 0px;">
                                <p style="font-size: 15px;">Tourner à<br> gauche</p>
                            </div>
                            <div class="col-md-2" style="margin-left: 0px;margin-right: 0px;display:block;padding: 0px;">
                                <img src="https://raw.githubusercontent.com/Anton1B/Base_mobile_MaD/main/src_web/pictures/left.png" width="50" height="50" class="d-inline-block" alt="" onmousedown="Left()" onmouseup="LeftRelease()" id="left-img" type="button">
                            </div>
                            <div class="col-md-2" style="margin-left: 0px;margin-right: 0px;display:block;padding: 0px;">
                                <img src="https://raw.githubusercontent.com/Anton1B/Base_mobile_MaD/main/src_web/pictures/logo_grey_transp.png" width="50" height="50" class="d-inline-block" alt="" onmousedown="Center()" onmouseup="CenterRelease()" id="center-img" type="button">
                            </div>
                            <div class="col-md-2" style="margin-left: 0px;margin-right: 0px;display:block;padding: 0px;">
                                <img src="https://raw.githubusercontent.com/Anton1B/Base_mobile_MaD/main/src_web/pictures/right.png" width="50" height="50" class="d-inline-block" alt="" onmousedown="Right()" onmouseup="RightRelease()" id="right-img" type="button">
                            </div>
                            <div class="col-md" style="padding-left: 2px;">
                                <p style="font-size: 15px;">Tourner à<br> droite</p>
                            </div>
                        </div>
                
                        <div class="row my-1">
                            <div class="col-md"></div>
                            <div class="col-md-2" style="margin:auto;display:block;padding-left: 0px;margin-top: 0px;padding-right: 5px;">
                                <img src="https://raw.githubusercontent.com/Anton1B/Base_mobile_MaD/main/src_web/pictures/down.png" width="50" height="50" class="d-inline-block" alt="" onmousedown="Down()" onmouseup="DownRelease()" id="down-img" type="button">
                                <br>
                            </div>
                            <div class="col-md"></div>
                        </div>
                        <div class="row my-1" style="height: 25px;">
                            <div class="col-md"></div>
                            <div class="col-md-2" style="margin: auto;display:block">
                                <p style="font-size: 15px;">Reculer</p>
                            </div>
                            <div class="col-md"></div>
                        </div>
                    </div>
                    <div class="col-md-7" id='affichage_video' style="padding: 0px;margin: auto;">
                        <div class="col d-flex justify-content-center" style="margin: 5px;">
                            <img src="pictures/camera.svg" style="margin:auto;display:block" height="90%" width="90%" class="p-1 bg-dark video_turtlebot" alt="flux video"/>
                        </div>
                    </div>
                </div>    
                
                <div id="controle_joystick" class="tabcontent" style="background-color: #8EC4FF;display: none;">
                    <div class="col-md-5" style="padding-left: 1px;background-color: #F6F8E1;margin: 5px;" onclick="modeChange('joystick')">
                        <h4 class="alert-heading">Instructions: </h4>
                        <p style="margin-bottom: 1px;">Pour diriger le robot, vous pouvez utiliser le joystick: </p>
                        <div id='joystickCommande'>
                            <div class="row my-2">
                                <div class="col">
                                    <div class="d-flex justify-content-center" style="width: 210px; height: 210px;">
                                        <div id="joystick"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7" id='affichage_video' style="padding: 0px;">
                        <div class="col d-flex justify-content-center" style="margin: 5px;">
                            <img src="pictures/camera.svg" style="margin:auto;display:block" height="90%" width="90%" class="p-1 bg-dark video_turtlebot" alt="flux video"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-block d-lg-none px-0 col-md-12" onclick="modeChange('joystick')"> 
                <div class="row" style="margin: auto; display: flex">
                    <img src="pictures/camera.svg" style="margin:auto;display:block" height="300px" width="300px" class="p-1 bg-dark video_turtlebot" alt="flux video"/>
                </div>
                <div class="row m-2 " style="background-color: #F6F8E1;">
                    <div class="col-6">
                        <h4 class="alert-heading">Instructions: </h4>
                        <p style="margin-bottom: 1px;">Pour diriger le robot, vous pouvez utiliser le joystick: </p>
                    </div>
                    <div class="col-6">
                        <div class="d-flex justify-content-center" style="width: 150px; height: 150px;">
                            <div id="joystickSmall"></div>
                        </div>
                    </div>
                </div>   
            </div>
        </div>
    </div>
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script src="https://static.robotwebtools.org/keyboardteleopjs/current/keyboardteleop.min.js"></script>
    <script src="https://yoannmoinet.github.io/nipplejs/javascripts/nipplejs.js"></script>
    <script src="scripts/js_turtlebot_teleop.js"></script>
</body>
</html>